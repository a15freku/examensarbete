<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>SVG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="../Data/aaon.js"></script>
</head>

<body>
  <svg width="600" height="300" viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">

    <!-- The line element just takes the attributes x1, x2, y1 and y2 to make a line from (x1,y1) to (x2,y2). -->

    <!-- Y-line -->
    <line x1="0" y1="0" x2="0" y2="300" stroke-width="2" stroke="black" />
    <!-- X-line -->
    <line x1="0" y1="300" x2="600" y2="300" stroke-width="2" stroke="black" />

    <!-- Data (x,y) -->
    <!-- Alt. transform="translate(0,300) scale(1,-1) to flip y-axis -->
    <g transform="matrix(1 0 0 -1 0 300)" id="graph">

      <polyline id="graph3" fill="none" stroke="green" points="" />

    </g>
  </svg>
  <script>
    // Normalize
    function normalize(dataInput) {
      var cnt = dataInput.length;
      var min = 1000000;
      var max = -1000000;
      for (var i = 0; i < cnt; i++) {
        var val = dataInput[i].Open;
        min = Math.min(min, val);
        max = Math.max(max, val);
      }
      var range = max - min;
      for (var i = 0; i < cnt; i++) {
        dataInput[i].normOpen = (dataInput[i].Open - min) / range;
       // console.log(dataInput[i].Open, dataInput[i].normOpen);
      }
      return dataInput;
    }

    // Loop
    function loopData(stockData) {
      var lengthBetweenPoints = 5;
      var days = 100;
      var graph = document.getElementById('graph3');
      var polyData = "";
      for (i = 0; i < days; i++) {
        polyData += (i * lengthBetweenPoints) + "," + stockData[i].normOpen * 300 + " ";
      }
      graph.setAttribute("points", polyData);
    }
    
    var data = normalize(aaon);

    var startDate = new Date();
    for(var i = 0; i < 80; i++) {
      loopData(data);
    }
    var endDate = new Date();
    var seconds = (endDate.getTime() - startDate.getTime()) / 1000;
    console.log("Seconds: " + seconds);
    
  </script>
</body>

</html>