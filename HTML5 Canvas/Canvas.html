<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>HTML5 Canvas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="../Data/aaon.js"></script>
  <script type="text/javascript" src="../Data/abax.js"></script>
</head>

<body>
  <canvas width="600" height="300" id="canvas"></canvas>
  <script>
    // Normalize data
    function normalize(dataInput) {
      var cnt = dataInput.length;
      var min = 1000000;
      var max = -1000000;
      for (var i = 0; i < cnt; i++) {
        var val = dataInput[i].Open;
        min = Math.min(min, val);
        max = Math.max(max, val);
      }
      var range = max - min;
      for (var i = 0; i < cnt; i++) {
        dataInput[i].normOpen = (dataInput[i].Open - min) / range;
       // console.log(dataInput[i].Open, dataInput[i].normOpen);
      }
      return dataInput;
    }

    // Loop data
    function loopData(data) {
      var lengthBetweenPoints = data.length / (data.length / 5);
      var days = data.length;
      ctx.beginPath();
      ctx.strokeStyle = "green";
      ctx.moveTo(0, data[0].normOpen * 300);
      for (var i = 1; i < days; i++) {
        ctx.lineTo(i * lengthBetweenPoints, data[i].normOpen * 300);
      }
      ctx.stroke();
      ctx.closePath();
    }

    // Variables
    var data = normalize(aaon);
    var data2 = normalize(abax);

    var canvas = document.getElementById('canvas');
    ctx = canvas.getContext('2d');
    canvas.width = data.length * 5;
    ctx.translate(0, canvas.height);
    ctx.scale(1, -1);

    // Lines for x and y-axis
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.lineTo(canvas.width, 0);
    ctx.moveTo(0, 0);
    ctx.lineTo(0, 300);
    ctx.lineTo(canvas.width, 300);
    ctx.lineTo(canvas.width, -300);
    ctx.stroke();
    ctx.closePath();

    // Write graphs in diagram
    var startDate = new Date();
    for(var i = 0; i < 3000; i++) {
      loopData(data);
      loopData(data2);
    }
    var endDate = new Date();
    var seconds = (endDate.getTime() - startDate.getTime()) / 1000;
    console.log("Seconds: " + seconds);
  </script>
</body>

</html>